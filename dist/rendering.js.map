{"version":3,"sources":["../src/rendering.js"],"names":["link","scope","elem","attrs","ctrl","data","panel","find","$tooltip","$","events","on","render","renderingCompleted","setElementHeight","height","row","_","isString","parseInt","replace","title","css","e","addChart","option","tooltip","show","trigger","legend","xAxis","type","yAxis","series","serie","i","length","item","name","push","myChart","echarts","init","setOption"],"mappings":";;;;;;AAEe,aAASA,IAAT,CAAcC,KAAd,EAAqBC,IAArB,EAA2BC,KAA3B,EAAkCC,IAAlC,EAAwC;AACnD,YAAIC,IAAJ,EAAUC,KAAV;AACAJ,eAAOA,KAAKK,IAAL,CAAU,eAAV,CAAP;AACA,YAAIC,WAAWC,EAAE,oBAAF,CAAf;AACAL,aAAKM,MAAL,CAAYC,EAAZ,CAAe,QAAf,EAAyB,YAAW;AAChCC;AACAR,iBAAKS,kBAAL;AACH,SAHD;AAIA,iBAASC,gBAAT,GAA4B;AACxB,gBAAG;AACN,oBAAIC,SAASX,KAAKW,MAAL,IAAeT,MAAMS,MAArB,IAA+BX,KAAKY,GAAL,CAASD,MAArD;AACA,oBAAIE,EAAEC,QAAF,CAAWH,MAAX,CAAJ,EAAwB;AACtBA,6BAASI,SAASJ,OAAOK,OAAP,CAAe,IAAf,EAAqB,EAArB,CAAT,EAAmC,EAAnC,CAAT;AACD;AACDL,0BAAU,CAAV,CALM,CAKO;AACbA,0BAAUT,MAAMe,KAAN,GAAc,EAAd,GAAmB,CAA7B,CANM,CAM0B;AAChCnB,qBAAKoB,GAAL,CAAS,QAAT,EAAmBP,SAAS,IAA5B;AACA,uBAAO,IAAP;AACI,aATD,CASE,OAAMQ,CAAN,EAAQ;AACb,uBAAO,KAAP;AACI;AACJ;AACD,iBAASC,QAAT,GAAoB;AACvB,gBAAIC,SAAS;AACEC,yBAAS;AACnBC,0BAAM,IADa;AAEnBC,6BAAS;AAFU,iBADX;AAKZC,wBAAQ;AACJxB,0BAAMD,KAAKC,IAAL,CAAUwB,MAAV,IAAoB;AADtB,iBALI;AAQZC,uBAAO,CAAC;AACUC,0BAAM,UADhB;AAEU1B,0BAAMD,KAAKC,IAAL,CAAUyB,KAAV,IAAmB;AAFnC,iBAAD,CARK;AAYZE,uBAAO,CAAC;AACUD,0BAAM;AADhB,iBAAD,CAZK;AAeZE,wBAAQ,YAAU;AACA,wBAAIC,QAAM,EAAV;AACd,wBAAI7B,OAAOD,KAAKC,IAAL,CAAU2B,KAAV,IAAmB,EAA9B;AACc,yBAAI,IAAIG,IAAI,CAAZ,EAAeA,IAAI/B,KAAKC,IAAL,CAAUyB,KAAV,CAAgBM,MAAnC,EAA2CD,GAA3C,EAA+C;AAC3C,4BAAIE,OAAO;AAC5BC,kCAAMlC,KAAKC,IAAL,CAAUwB,MAAV,CAAiBM,CAAjB,CADsB;AAEPJ,kCAAM,MAFC;AAGP1B,kCAAMA,KAAK8B,CAAL;AAHC,yBAAX;AAKAD,8BAAMK,IAAN,CAAWF,IAAX;AACH;AACD,2BAAOH,KAAP;AACH,iBAZP;AAfI,aAAb;AA6BA,gBAAIM,UAAUC,QAAQC,IAAR,CAAaxC,KAAK,CAAL,CAAb,EAAsB,SAAtB,CAAd;AACAsC,oBAAQG,SAAR,CAAkBlB,MAAlB;AACI;AACD,iBAASb,MAAT,GAAiB;AACpB,gBAAG,CAACR,KAAKC,IAAT,EAAc;AAAC;AAAQ;AAChBA,mBAAOD,KAAKC,IAAZ;AACAC,oBAAQF,KAAKE,KAAb;AACA,gBAAGQ,kBAAH,EAAsB;AAClBU;AACV;AACG;AACJ;;uBA/DuBxB,I;;;;AAFjByC,mB","file":"rendering.js","sourcesContent":["import echarts from './libs/echarts';\n\nexport default function link(scope, elem, attrs, ctrl) {\n    var data, panel;\n    elem = elem.find('.echart-panel');\n    var $tooltip = $('<div id=\"tooltip\">');\n    ctrl.events.on('render', function() {\n        render();\n        ctrl.renderingCompleted();\n    });\n    function setElementHeight() {\n        try{\n\t    var height = ctrl.height || panel.height || ctrl.row.height;\n\t    if (_.isString(height)) {\n\t      height = parseInt(height.replace('px', ''), 10);\n\t    }\n\t    height -= 5; // padding\n\t    height -= panel.title ? 24 : 9; // subtract panel title bar\n\t    elem.css('height', height + 'px');\n\t    return true;\n        } catch(e){\n\t    return false;\n        }\n    }\n    function addChart() {\n\tvar option = {\n                tooltip: {\n\t\t    show: true,\n\t\t    trigger: \"item\"\n\t\t},\n\t\tlegend: {\n\t\t    data: ctrl.data.legend || []\n\t\t},\n\t\txAxis: [{  \n                    type: 'category',  \n                    data: ctrl.data.xAxis || [] \n                }],\n\t\tyAxis: [{  \n                    type: 'value'  \n                }],\n\t\tseries: function(){  \n                    var serie=[];  \n\t\t    var data = ctrl.data.yAxis || [];\n                    for(let i = 0; i < ctrl.data.xAxis.length; i++){  \n                        let item = {  \n\t\t\t    name: ctrl.data.legend[i],\n                            type: 'line',  \n                            data: data[i]  \n                        };  \n                        serie.push(item);  \n                    }  \n                    return serie;  \n                }()\n        };\n\tvar myChart = echarts.init(elem[0], \"default\");\n\tmyChart.setOption(option);\n    }\n    function render(){\n\tif(!ctrl.data){return;}\n        data = ctrl.data;\n        panel = ctrl.panel;\n        if(setElementHeight()){\n            addChart();\n\t}\n    }\n}\n"]}